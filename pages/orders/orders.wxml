<!-- pages/orders/orders.wxml -->
<view class="orders-container">
  <!-- 顶部标题和切换标签 -->
  <view class="header">
    <view class="title">我的订单</view>
    <view class="tabs">
      <view 
        class="tab-item {{activeTab === 'all' ? 'active' : ''}}" 
        bindtap="switchTab" 
        data-tab="all"
      >
        全部
      </view>
      <view 
        class="tab-item {{activeTab === 'unpaid' ? 'active' : ''}}" 
        bindtap="switchTab" 
        data-tab="unpaid"
      >
        待支付
      </view>
      <view 
        class="tab-item {{activeTab === 'paid' ? 'active' : ''}}" 
        bindtap="switchTab" 
        data-tab="paid"
      >
        已支付
      </view>
      <view 
        class="tab-item {{activeTab === 'completed' ? 'active' : ''}}" 
        bindtap="switchTab" 
        data-tab="completed"
      >
        已完成
      </view>
    </view>
  </view>
  
  <!-- 订单列表 -->
  <view class="orders-list">
    <block wx:if="{{orders.length > 0}}">
      <block wx:for="{{orders}}" wx:key="orderNo">
        <view class="order-item" wx:if="{{activeTab === 'all' || activeTab === item.status}}">
          <view class="order-header">
            <text class="order-no">订单号: {{item.orderNo}}</text>
            <text class="order-status {{item.status}}">{{getStatusText(item.status)}}</text>
          </view>
          
          <view class="order-products">
            <block wx:for="{{item.products}}" wx:key="id">
              <view class="product-item">
                <view class="product-info">
                  <view class="product-name">{{item.name}}</view>
                  <view class="product-spec">规格: {{item.spec}}</view>
                  <view class="product-price">¥{{item.price}} x{{item.quantity}}</view>
                </view>
              </view>
            </block>
          </view>
          
          <view class="order-footer">
            <view class="order-total">
              共{{item.products.length}}件商品 合计: <text class="total-price">¥{{item.totalAmount}}</text>
            </view>
            <view class="order-actions">
              <button 
                class="action-btn" 
                wx:if="{{item.status === 'unpaid'}}" 
                bindtap="payOrder" 
                data-orderNo="{{item.orderNo}}"
              >
                立即支付
              </button>
              <button 
                class="action-btn" 
                wx:if="{{item.status === 'paid'}}" 
                bindtap="confirmReceipt" 
                data-orderNo="{{item.orderNo}}"
              >
                确认收货
              </button>
              <button 
                class="action-btn cancel" 
                wx:if="{{item.status === 'unpaid'}}" 
                bindtap="cancelOrder" 
                data-orderNo="{{item.orderNo}}"
              >
                取消订单
              </button>
            </view>
          </view>
        </view>
      </block>
    </block>
    
    <!-- 空状态 -->
    <view class="empty-state" wx:else>
      <view class="empty-text">暂无订单记录</view>
      <button class="go-shopping" bindtap="goShopping">去逛逛</button>
    </view>
  </view>
</view>
